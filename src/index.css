@tailwind base;
@tailwind components;
@tailwind utilities;

/* Critical CSS variables inlined to eliminate request chain */
:root {
  overflow-wrap: break-word;
  text-size-adjust: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Gray scale variables */
  --tt-gray-light-a-50: rgba(56, 56, 56, 0.04);
  --tt-gray-light-a-100: rgba(15, 22, 36, 0.05);
  --tt-gray-light-a-200: rgba(37, 39, 45, 0.1);
  --tt-gray-light-a-300: rgba(47, 50, 55, 0.2);
  --tt-gray-light-a-400: rgba(40, 44, 51, 0.42);
  --tt-gray-light-a-500: rgba(52, 55, 60, 0.64);
  --tt-gray-light-a-600: rgba(36, 39, 46, 0.78);
  --tt-gray-light-a-700: rgba(35, 37, 42, 0.87);
  --tt-gray-light-a-800: rgba(30, 32, 36, 0.95);
  --tt-gray-light-a-900: rgba(29, 30, 32, 0.98);
  
  --tt-gray-light-50: rgba(250, 250, 250, 1);
  --tt-gray-light-100: rgba(244, 244, 245, 1);
  --tt-gray-light-200: rgba(234, 234, 235, 1);
  --tt-gray-light-300: rgba(213, 214, 215, 1);
  --tt-gray-light-400: rgba(166, 167, 171, 1);
  --tt-gray-light-500: rgba(125, 127, 130, 1);
  --tt-gray-light-600: rgba(83, 86, 90, 1);
  --tt-gray-light-700: rgba(64, 65, 69, 1);
  --tt-gray-light-800: rgba(44, 45, 48, 1);
  --tt-gray-light-900: rgba(34, 35, 37, 1);
  
  --tt-gray-dark-a-50: rgba(232, 232, 253, 0.05);
  --tt-gray-dark-a-100: rgba(231, 231, 243, 0.07);
  --tt-gray-dark-a-200: rgba(238, 238, 246, 0.11);
  --tt-gray-dark-a-300: rgba(239, 239, 245, 0.22);
  --tt-gray-dark-a-400: rgba(244, 244, 255, 0.37);
  --tt-gray-dark-a-500: rgba(236, 238, 253, 0.5);
  --tt-gray-dark-a-600: rgba(247, 247, 253, 0.64);
  --tt-gray-dark-a-700: rgba(251, 251, 254, 0.75);
  --tt-gray-dark-a-800: rgba(253, 253, 253, 0.88);
  --tt-gray-dark-a-900: rgba(255, 255, 255, 0.96);
  
  --tt-gray-dark-50: rgba(25, 25, 26, 1);
  --tt-gray-dark-100: rgba(32, 32, 34, 1);
  --tt-gray-dark-200: rgba(45, 45, 47, 1);
  --tt-gray-dark-300: rgba(70, 70, 73, 1);
  --tt-gray-dark-400: rgba(99, 99, 105, 1);
  --tt-gray-dark-500: rgba(124, 124, 131, 1);
  --tt-gray-dark-600: rgba(163, 163, 168, 1);
  --tt-gray-dark-700: rgba(192, 192, 195, 1);
  --tt-gray-dark-800: rgba(224, 224, 225, 1);
  --tt-gray-dark-900: rgba(245, 245, 245, 1);

  /* Brand colors */
  --tt-brand-color-50: rgba(239, 238, 255, 1);
  --tt-brand-color-100: rgba(222, 219, 255, 1);
  --tt-brand-color-200: rgba(195, 189, 255, 1);
  --tt-brand-color-300: rgba(157, 138, 255, 1);
  --tt-brand-color-400: rgba(122, 82, 255, 1);
  --tt-brand-color-500: rgba(98, 41, 255, 1);
  --tt-brand-color-600: rgba(84, 0, 229, 1);
  --tt-brand-color-700: rgba(75, 0, 204, 1);
  --tt-brand-color-800: rgba(56, 0, 153, 1);
  --tt-brand-color-900: rgba(43, 25, 102, 1);
  --tt-brand-color-950: hsla(257, 100%, 9%, 1);

  /* Semantic colors */
  --white: rgba(255, 255, 255, 1);
  --black: rgba(14, 14, 17, 1);
  --transparent: rgba(255, 255, 255, 0);

  /* Shadows */
  --tt-shadow-elevated-md:
    0px 16px 48px 0px rgba(17, 24, 39, 0.04),
    0px 12px 24px 0px rgba(17, 24, 39, 0.04),
    0px 6px 8px 0px rgba(17, 24, 39, 0.02),
    0px 2px 3px 0px rgba(17, 24, 39, 0.02);

  /* Border radius */
  --tt-radius-xxs: 0.125rem;
  --tt-radius-xs: 0.25rem;
  --tt-radius-sm: 0.375rem;
  --tt-radius-md: 0.5rem;
  --tt-radius-lg: 0.75rem;
  --tt-radius-xl: 1rem;

  /* Transitions */
  --tt-transition-duration-short: 0.1s;
  --tt-transition-duration-default: 0.2s;
  --tt-transition-duration-long: 0.64s;
  --tt-transition-easing-default: cubic-bezier(0.46, 0.03, 0.52, 0.96);
  --tt-transition-easing-cubic: cubic-bezier(0.65, 0.05, 0.36, 1);
  --tt-transition-easing-quart: cubic-bezier(0.77, 0, 0.18, 1);
  --tt-transition-easing-circ: cubic-bezier(0.79, 0.14, 0.15, 0.86);
  --tt-transition-easing-back: cubic-bezier(0.68, -0.55, 0.27, 1.55);

  /* Contrast ratios */
  --tt-accent-contrast: 8%;
  --tt-destructive-contrast: 8%;
  --tt-foreground-contrast: 8%;

  /* Theme colors */
  --tt-bg-color: var(--white);
  --tt-border-color: var(--tt-gray-light-a-200);
  --tt-border-color-tint: var(--tt-gray-light-a-100);
  --tt-sidebar-bg-color: var(--tt-gray-light-100);
  --tt-scrollbar-color: var(--tt-gray-light-a-200);
  --tt-cursor-color: var(--tt-brand-color-500);
  --tt-selection-color: rgba(157, 138, 255, 0.2);
  --tt-card-bg-color: var(--white);
  --tt-card-border-color: var(--tt-gray-light-a-100);

  /* Page backgrounds */
  --page-bg: url('/src/assets/light.jpg');
}

.dark {
  --tt-bg-color: rgb(25, 20, 35);
  --tt-border-color: rgba(200, 180, 255, 0.12);
  --tt-border-color-tint: rgba(200, 180, 255, 0.08);
  --tt-sidebar-bg-color: rgb(30, 25, 40);
  --tt-scrollbar-color: rgba(200, 180, 255, 0.12);
  --tt-cursor-color: rgb(200, 140, 255);
  --tt-selection-color: rgba(200, 140, 255, 0.25);
  --tt-card-bg-color: rgba(40, 35, 55, 0.85);
  --tt-card-border-color: rgba(200, 180, 255, 0.15);
  --tt-shadow-elevated-md:
    0px 16px 48px 0px rgba(0, 0, 0, 0.5), 0px 12px 24px 0px rgba(0, 0, 0, 0.24),
    0px 6px 8px 0px rgba(0, 0, 0, 0.22), 0px 2px 3px 0px rgba(0, 0, 0, 0.12);
  --page-bg: url('/src/assets/dark.jpg');
}

/* Critical keyframe animations inlined */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes zoomIn {
  from { transform: scale(0.95) translateZ(0); }
  to { transform: scale(1) translateZ(0); }
}

@keyframes zoomOut {
  from { transform: scale(1) translateZ(0); }
  to { transform: scale(0.95) translateZ(0); }
}

@keyframes zoom {
  0% { opacity: 0; transform: scale(0.95) translateZ(0); }
  100% { opacity: 1; transform: scale(1) translateZ(0); }
}

@keyframes slideFromTop {
  from { transform: translateY(-0.5rem) translateZ(0); }
  to { transform: translateY(0) translateZ(0); }
}

@keyframes slideFromRight {
  from { transform: translateX(0.5rem) translateZ(0); }
  to { transform: translateX(0) translateZ(0); }
}

@keyframes slideFromLeft {
  from { transform: translateX(-0.5rem) translateZ(0); }
  to { transform: translateX(0) translateZ(0); }
}

@keyframes slideFromBottom {
  from { transform: translateY(0.5rem) translateZ(0); }
  to { transform: translateY(0) translateZ(0); }
}

@keyframes spin {
  from { transform: rotate(0deg) translateZ(0); }
  to { transform: rotate(360deg) translateZ(0); }
}

/* Global box-sizing and transition */
:root *,
:root ::before,
:root ::after {
  box-sizing: border-box;
  transition: none var(--tt-transition-duration-default) var(--tt-transition-easing-default);
}

/* Force GPU compositing for animated elements */
[class*="animate-"],
.blog-page .card-border,
.blog-page .card-border img,
.rainbow-tag {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000;
  perspective: 1000;
}

/* Optimize hover scale animations */
[class*="hover:scale-"] {
  will-change: transform;
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* Optimize opacity transitions */
[class*="hover:opacity-"],
[class*="transition-opacity"] {
  will-change: opacity;
  backface-visibility: hidden;
}

/* Optimize color transitions - these are paint operations but acceptable */
[class*="hover:bg-"],
[class*="transition-colors"] {
  will-change: background-color;
}

/* Prevent layout shifts */
@layer base {
  /* Reserve space for all images */
  img {
    max-width: 100%;
    height: auto;
    /* Prevent image flickering */
    image-rendering: -webkit-optimize-contrast;
  }
  
  /* Aspect ratio containers prevent layout shift */
  .aspect-ratio-box {
    position: relative;
    width: 100%;
  }
  
  .aspect-ratio-box::before {
    content: '';
    display: block;
    padding-top: var(--aspect-ratio, 100%);
  }
  
  .aspect-ratio-box > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  /* Contain layout for better performance - reduces style recalculation scope */
  main, article, section {
    contain: layout style;
  }
  
  /* Isolate card components to prevent style propagation */
  .card-border {
    contain: content;
  }
  
  /* Optimize list rendering */
  [class*="space-y-"], [class*="space-x-"] {
    contain: layout;
  }
  
  /* Prevent dynamic content shifts */
  [class*="border-"][class*="rounded"] {
    will-change: auto;
    contain: layout;
  }
}

html, body {
	background: var(--tt-bg-color);
	color: var(--tt-color-text-gray);
	transition: background 200ms ease, color 200ms ease;
	/* Prevent font swap causing layout shift */
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}


[class*="border-"][class*="rounded"] {
	background: var(--tt-card-bg-color) !important;
	border-color: var(--tt-card-border-color) !important;
	color: var(--tt-color-text-gray) !important;
}


.dark body::before {
	content: "";
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	pointer-events: none;
	/* cute purple/pink gradient overlay */
	background-image: radial-gradient(circle at 10% 10%, rgba(200,140,255,0.08), transparent 40%), radial-gradient(circle at 90% 80%, rgba(255,150,200,0.06), transparent 40%), radial-gradient(circle at 50% 50%, rgba(180,140,255,0.03), transparent 60%);
	transform: translateZ(0);
	will-change: opacity;
}

.dark img {
	filter: saturate(0.95) contrast(0.95) brightness(0.95);
	transition: filter 200ms ease;
}


.dark h2 {
	text-shadow: 0 2px 12px rgba(200, 140, 255, 0.3);
}


.dark footer, .dark header {
	background: transparent;
}


.fixed.bottom-6.right-6 {
	transform: translateZ(0);
}


.card-border {
	border-width: 10px;
	border-image-source: url('/border.png');
	border-image-slice: 10;
	border-image-repeat: round;
	border-image-outset: 0;
	border-image-width: 10px;
	border-radius: 0.75rem;
	position: relative;
	background: transparent;
	overflow: visible;
}

/* Rainbow tag animation for special tags */
@keyframes rainbow-slide {
	0% { background-position: 0% 50%; }
	50% { background-position: 100% 50%; }
	100% { background-position: 0% 50%; }
}

.rainbow-tag {
	background-size: 300% 100%;
	animation: rainbow-slide 3s linear infinite, rainbow-colors 6s linear infinite;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	will-change: background-position;
	transform: translateZ(0);
}

@keyframes rainbow-colors {
	0% {
		background-image: linear-gradient(90deg, #ff4d4d, #ffb84d, #fff14d, #4dff88, #4da6ff, #b84dff);
	}
	25% {
		background-image: linear-gradient(90deg, #ffb84d, #fff14d, #4dff88, #4da6ff, #b84dff, #ff4d4d);
	}
	50% {
		background-image: linear-gradient(90deg, #fff14d, #4dff88, #4da6ff, #b84dff, #ff4d4d, #ffb84d);
	}
	75% {
		background-image: linear-gradient(90deg, #4dff88, #4da6ff, #b84dff, #ff4d4d, #ffb84d, #fff14d);
	}
	100% {
		background-image: linear-gradient(90deg, #ff4d4d, #ffb84d, #fff14d, #4dff88, #4da6ff, #b84dff);
	}
}

/* glossy sheen overlay for shiny effect */
.rainbow-tag {
	position: relative;
	overflow: hidden;
}

.rainbow-tag::after {
	content: "";
	position: absolute;
	top: 0;
	left: -60%;
	width: 60%;
	height: 100%;
	pointer-events: none;
	transform: skewX(-20deg) translateX(0);
	background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.6) 50%, rgba(255,255,255,0) 100%);
	filter: blur(0.5px);
	opacity: 0.85;
	animation: rainbow-sheen 2.8s linear infinite;
	will-change: transform;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
}

@keyframes rainbow-sheen {
	0% { transform: skewX(-20deg) translateX(0); }
	100% { transform: skewX(-20deg) translateX(367%); }
}

.card-border::before {
	content: '';
	position: absolute;
	inset: 0px;
	border-radius: calc(0.75rem - 10px);
	background: var(--tt-card-bg-color);
	z-index: 0;
	pointer-events: none;
}

.card-border > * {
	position: relative;
	z-index: 1;
}

/* card hover animation: only in blog page - use transforms and box-shadow for efficient GPU compositing */
.blog-page .card-border {
	transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms cubic-bezier(.2,.8,.2,1);
	will-change: transform, box-shadow;
}

.blog-page .card-border img {
	transition: transform 220ms cubic-bezier(.2,.8,.2,1);
	will-change: transform;
}

.blog-page .card-border:hover {
	transform: translateY(-6px);
	box-shadow: 0 12px 30px rgba(2,6,23,0.35);
}

.blog-page .card-border:hover img {
	transform: scale(1.03);
}

.dark .card-border {
	border-image-source: none !important;
	border-image: none !important;
	border-width: 1px !important;
	border-style: solid !important;
	border-color: rgba(200,180,255,0.2) !important;
	box-shadow: 0 4px 20px rgba(150,100,200,0.2), 0 0 40px rgba(200,140,255,0.05);
	background: var(--tt-card-bg-color);
	color: var(--white) !important;
}

.dark .card-border::before {
	/* solid card fill in dark mode (no glass blur / no transparency) */
	background: var(--tt-card-bg-color);
}

.dark .card-border h2 {
	color: rgb(220, 180, 255) !important;
}

.dark .card-border p,
.dark .card-border a,
.dark .card-border span,
.dark .card-border li,
.dark .card-border div {
	color: rgba(240,230,255,0.9) !important;
}


:root {
	--page-bg: url('/src/assets/light.jpg');
}
.dark {
	--page-bg: url('/src/assets/dark.jpg');
}

/* Pin the page background so it doesn't move while scrolling */
[style*="var(--page-bg)"] {
	background-attachment: fixed !important;
	background-position: center center !important;
	background-size: cover !important;
}
